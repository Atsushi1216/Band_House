<h1>曲一覧ページ</h1>
 <table>
  <thead>
    <tr>
      <th>ユーザーネーム</th>
      <th>タイトル</th>
      <th>ジャケット写真など</th>
      <th>説明</th>
      <th>再生</th>
      <th>自己評価</th>
      <th>コメント</th>
    </tr>
  </thead>
<tbody>

<% @musics.each do |music| %>
<%# binding.pry %>
  <tr>
    <td><%= link_to music.user.name, user_path(music.user_id) %>
    <%= attachment_image_tag music.user, :profile_image, :fill, 40, 40, fallback: "no_image.jpg" %></td>
  </tr>
  <tr>
    <td><%= link_to music.title,  music_path(music.id) %></td>
  </tr>
  <tr>
    <td><%= link_to music_path(music.id) do %>
    <%= attachment_image_tag(music, :song_image, :fill, 30, 30, fallback: "no_image.jpg") %>
    <% end %></td>
  </tr>
  <tr>
    <td><%= music.caption %></td>
  </tr>
  <tr>
    <td><audio src= "<%= "#{music.song}" %>" controls=""></audio></td>
  </tr>
  <tr>
    <td class="music-evaluation" data-score="<%= music.evaluation %>"></td>
  </tr>
  <tr>
    <td><%= link_to "#{music.comments.count} コメント", music_path(music.id) %></td>
  </tr>
  <tr><td><% if music.user == current_user %>
      <%= link_to "削除", music_path(music), method: :delete %>
    <% end %></td>
  </tr>
  <% end %>
  </tbody>
</table>
  <script>
      $('.music-evaluation').raty({
        readOnly: true,
        score: function() {
        return $(this).attr('data-score');
      },
        path: '/assets/'
      });
  </script>

<%= paginate @musics %>
