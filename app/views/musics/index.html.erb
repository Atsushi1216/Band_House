<div>
<%= flash[:notice]  %>
</div>
<div class="container mt-5">
  <div class="row">
    <div class="col-5 mx-auto">
      <div >
        <h2>いいね！数ランキング</h2>
        <br>
        <% @all_ranks.each.with_index(1) do |music, i| %>
          第<%= i %>位
          <span class="container col-2 mt-5 mx-auto">
            <%= link_to music.title,  music_path(music.id) %>
          </span>
          <span class="containercol-2 mt-5 mx-auto">
            <%= music.favorites.count %>いいね！
          </span>
          <br>
          <br>
        <% end %>
      </div>
    </div>
  </div>
</div>
<hr>
<div class="container col-2 mx-auto">
  <h1>新着楽曲</h1>
</div>
<% @musics.each do |music| %>
<%# binding.pry %>
<div class="container mt-4">
  <div class="row">
    <div class="col-5 mx-auto">
      <div class="card" style="width: 25rem;">
        <span class="jacket">
          <%= link_to music_path(music.id) do %>
            <%= attachment_image_tag(music, :song_image, :fill, 398, 150, fallback: "no_image.jpg") %>
          <% end %>
        </span>
        <div class="card-body">
          <h5 class="card-title">曲名：<%= link_to music.title,  music_path(music.id) %></h5>
          <p class="card-text"><%= music.caption %></p>
        </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">音源：<audio src= "<%= "#{music.song}" %>" controls=""></li>
            <li class="list-group-item">曲への自己評価：<p class="music-evaluation" data-score="<%= music.evaluation %>"></p></li>
            <li class="list-group-item">コメント件数：<%= link_to music.comments.count, music_path(music.id) %>　件</li>
          </ul>
          <div class="card-body">
              <% if music.user == current_user %>
              <%= link_to "編集", edit_music_path(music.id) %> |
              <%= link_to "削除", music_path(music), method: :delete %>
              <% end %>
              <p>投稿者のみ表示されます。</p>
        </div>
      </div>
    </div>
   </div>
</div>
  <% end %>
  </tbody>
</table>
  <script>
      $('.music-evaluation').empty();
      $('.music-evaluation').raty({
        readOnly: true,
        score: function() {
        return $(this).attr('data-score');
      },
        path: '/assets/'
      });
  </script>

<div class="container col-2 mt-5 mx-auto">
  <span>
    <%= paginate @musics %>
  </span>
</div>